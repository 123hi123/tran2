# æ‰‹èªè¾¨è­˜è¨“ç·´å¯¦æ–½æ­¥é©Ÿ

## ğŸ¯ åŸºæ–¼æ•¸æ“šåˆ†æçš„å…·é«”è¡Œå‹•è¨ˆåŠƒ

### ç¬¬ä¸€æ­¥ï¼šç«‹å³é–‹å§‹çš„æ•¸æ“šé è™•ç†ï¼ˆç¬¬1-2å¤©ï¼‰

#### 1.1 å‰µå»ºæ•¸æ“šé è™•ç†æ¨¡çµ„
```python
# æ–‡ä»¶ï¼šsrc/data_preprocessing.py
# ç›®çš„ï¼šè§£æ±º66%å³æ‰‹ç¼ºå¤±å€¼å’Œ10%å·¦æ‰‹ç¼ºå¤±å€¼å•é¡Œ

class SignLanguagePreprocessor:
    def __init__(self):
        self.sequence_length = 30  # åŸºæ–¼åˆ†æï¼Œ30å¹€ç´„1ç§’
        self.stride = 15  # æ»‘å‹•çª—å£ï¼Œå¢åŠ æ•¸æ“šé‡
        
    def handle_missing_values(self, df):
        """
        æ™ºèƒ½ç¼ºå¤±å€¼è™•ç†ç­–ç•¥ï¼š
        1. æ™‚åºç·šæ€§æ’å€¼ï¼ˆå‰å¾Œå¹€ï¼‰
        2. åŸºæ–¼èº«é«”å§¿æ…‹çš„ç´„æŸæ’å€¼
        3. å¦‚æœæ•´å€‹åºåˆ—ç¼ºå¤±ï¼Œä½¿ç”¨èº«é«”ä¸­å¿ƒé»
        """
        
    def normalize_coordinates(self, df):
        """
        åº§æ¨™æ¨™æº–åŒ–ï¼š
        1. ä»¥èº«é«”ä¸­å¿ƒç‚ºåŸé»
        2. æŒ‰èº«é«”å¤§å°ç¸®æ”¾
        3. æ¶ˆé™¤å€‹äººå·®ç•°
        """
        
    def create_sequences(self, df):
        """
        åºåˆ—ç”Ÿæˆï¼š
        1. æ»‘å‹•çª—å£åˆ‡å‰²
        2. å›ºå®šé•·åº¦padding/truncation
        3. æ¨™ç±¤å°æ‡‰
        """
```

**ç‚ºä»€éº¼é€™æ¨£è¨­è¨ˆ**ï¼š
- **30å¹€åºåˆ—**ï¼šåŸºæ–¼è¦–é »åˆ†æï¼Œå¤§éƒ¨åˆ†æ‰‹èªå‹•ä½œåœ¨1ç§’å…§å®Œæˆ
- **æ»‘å‹•çª—å£**ï¼šå¾121è¬å¹€å¯ä»¥ç”Ÿæˆç´„8è¬å€‹åºåˆ—ï¼Œå¢åŠ è¨“ç·´æ•¸æ“š
- **æ™ºèƒ½æ’å€¼**ï¼šæ¯”ç°¡å–®åˆªé™¤æˆ–å‡å€¼å¡«å……æ›´ä¿ç•™æ™‚åºä¿¡æ¯

#### 1.2 å‰µå»ºæ•¸æ“šè¼‰å…¥å™¨
```python
# æ–‡ä»¶ï¼šsrc/data_loader.py
# ç›®çš„ï¼šé«˜æ•ˆè™•ç†3GBæ•¸æ“šï¼Œé¿å…è¨˜æ†¶é«”æº¢å‡º

class SignLanguageDataset(Dataset):
    def __init__(self, csv_files, sequence_length=30, stride=15):
        # å»¶é²è¼‰å…¥ï¼šåªè¼‰å…¥ç´¢å¼•ï¼Œéœ€è¦æ™‚è¼‰å…¥æ•¸æ“š
        # è¨˜æ†¶é«”æ˜ å°„ï¼šè™•ç†å¤§æª”æ¡ˆ
        
    def __getitem__(self, idx):
        # å‹•æ…‹è¼‰å…¥å’Œé è™•ç†
        # æ•¸æ“šå¢å¼·ï¼šæ—‹è½‰ã€ç¸®æ”¾ã€å™ªè²
```

**ç‚ºä»€éº¼é€™æ¨£è¨­è¨ˆ**ï¼š
- **å»¶é²è¼‰å…¥**ï¼š3GBæ•¸æ“šç„¡æ³•å…¨éƒ¨è¼‰å…¥è¨˜æ†¶é«”
- **è¨˜æ†¶é«”æ˜ å°„**ï¼špandasçš„chunksizeè™•ç†å¤§æª”æ¡ˆ
- **å‹•æ…‹å¢å¼·**ï¼šè¨“ç·´æ™‚å³æ™‚ç”Ÿæˆè®ŠåŒ–ï¼Œå¢åŠ æ³›åŒ–èƒ½åŠ›

### ç¬¬äºŒæ­¥ï¼šåŸºç¤æ¨¡å‹å¿«é€Ÿé©—è­‰ï¼ˆç¬¬3å¤©ï¼‰

#### 2.1 ç°¡å–®GRUæ¨¡å‹
```python
# æ–‡ä»¶ï¼šsrc/models/simple_gru.py
# ç›®çš„ï¼šå¿«é€Ÿé©—è­‰æ•¸æ“šç®¡é“ï¼Œå»ºç«‹åŸºç·š

class SimpleGRU(nn.Module):
    def __init__(self, input_size=162, hidden_size=64, num_classes=34):
        super().__init__()
        self.gru = nn.GRU(input_size, hidden_size, batch_first=True)
        self.dropout = nn.Dropout(0.3)
        self.fc = nn.Linear(hidden_size, num_classes)
        
    def forward(self, x):
        # x shape: (batch, sequence, features)
        gru_out, _ = self.gru(x)
        # ä½¿ç”¨æœ€å¾Œä¸€å€‹æ™‚é–“æ­¥çš„è¼¸å‡º
        last_output = gru_out[:, -1, :]
        output = self.fc(self.dropout(last_output))
        return output
```

**ç‚ºä»€éº¼å¾ç°¡å–®é–‹å§‹**ï¼š
- **å¿«é€Ÿé©—è­‰**ï¼š1-2å°æ™‚è¨“ç·´ï¼Œç¢ºèªæ•¸æ“šç®¡é“æ­£ç¢º
- **åŸºç·šå»ºç«‹**ï¼šç›®æ¨™70%æº–ç¢ºç‡ï¼Œç‚ºå¾ŒçºŒæ¯”è¼ƒæä¾›åŸºæº–
- **å•é¡Œç™¼ç¾**ï¼šåŠæ—©ç™¼ç¾æ•¸æ“šæˆ–ä»£ç¢¼å•é¡Œ

#### 2.2 è¨“ç·´è…³æœ¬
```python
# æ–‡ä»¶ï¼šsrc/train.py
# é—œéµè¨­è¨ˆæ±ºç­–

def train_model():
    # æ‰¹æ¬¡å¤§å°16ï¼šåŸºæ–¼è¨˜æ†¶é«”åˆ†æ
    batch_size = 16
    
    # åŠ æ¬Šæå¤±ï¼šè™•ç†é¡åˆ¥ä¸å¹³è¡¡
    class_weights = compute_class_weights(train_dataset)
    criterion = nn.CrossEntropyLoss(weight=class_weights)
    
    # å­¸ç¿’ç‡èª¿åº¦
    optimizer = torch.optim.Adam(model.parameters(), lr=0.001)
    scheduler = ReduceLROnPlateau(optimizer, patience=5, factor=0.5)
    
    # æ—©åœæ©Ÿåˆ¶
    early_stopping = EarlyStopping(patience=10, min_delta=0.001)
```

**é‚è¼¯è§£é‡‹**ï¼š
- **æ‰¹æ¬¡å¤§å°16**ï¼šè¨˜æ†¶é«”ä½¿ç”¨1.6GB + æ¨¡å‹åƒæ•¸ < 6GB GPUé™åˆ¶
- **åŠ æ¬Šæå¤±**ï¼šæŸäº›æ‰‹èªé¡åˆ¥æ¨£æœ¬å¾ˆå°‘ï¼Œéœ€è¦å¹³è¡¡
- **å­¸ç¿’ç‡èª¿åº¦**ï¼šå¤§æ•¸æ“šé›†å®¹æ˜“é™·å…¥å±€éƒ¨æœ€å„ªï¼Œéœ€è¦å‹•æ…‹èª¿æ•´

### ç¬¬ä¸‰æ­¥ï¼šä¸­ç´šæ¨¡å‹å„ªåŒ–ï¼ˆç¬¬4-5å¤©ï¼‰

#### 3.1 åŠ å…¥æ³¨æ„åŠ›æ©Ÿåˆ¶
```python
# æ–‡ä»¶ï¼šsrc/models/attention_gru.py
# ç›®çš„ï¼šæå‡æ¨¡å‹å°é—œéµå¹€çš„é—œæ³¨

class AttentionGRU(nn.Module):
    def __init__(self, input_size=162, hidden_size=128, num_layers=2, num_classes=34):
        super().__init__()
        self.gru = nn.GRU(input_size, hidden_size, num_layers, 
                          batch_first=True, dropout=0.2)
        self.attention = nn.MultiheadAttention(hidden_size, num_heads=8)
        self.fc = nn.Linear(hidden_size, num_classes)
        
    def forward(self, x):
        gru_out, _ = self.gru(x)
        # æ³¨æ„åŠ›æ©Ÿåˆ¶ï¼šæ‰¾å‡ºé‡è¦çš„æ™‚é–“æ­¥
        attn_out, _ = self.attention(gru_out, gru_out, gru_out)
        # å…¨å±€å¹³å‡æ± åŒ–
        pooled = torch.mean(attn_out, dim=1)
        return self.fc(pooled)
```

**ç‚ºä»€éº¼åŠ å…¥æ³¨æ„åŠ›**ï¼š
- **æ‰‹èªç‰¹æ€§**ï¼šä¸æ˜¯æ‰€æœ‰å¹€éƒ½é‡è¦ï¼Œé—œéµå‹•ä½œå¹€æ±ºå®šæ„ç¾©
- **é•·åºåˆ—è™•ç†**ï¼š30å¹€åºåˆ—ä¸­ï¼Œæ³¨æ„åŠ›å¹«åŠ©æ¨¡å‹èšç„¦é—œéµéƒ¨åˆ†
- **æ€§èƒ½æå‡**ï¼šé æœŸå¾70%æå‡åˆ°85%æº–ç¢ºç‡

#### 3.2 è¶…åƒæ•¸å„ªåŒ–
```python
# æ–‡ä»¶ï¼šsrc/hyperparameter_tuning.py
# ç³»çµ±åŒ–èª¿å„ªç­–ç•¥

hyperparameter_space = {
    'learning_rate': [0.001, 0.0005, 0.0001],
    'hidden_size': [64, 128, 256],
    'num_layers': [1, 2, 3],
    'dropout_rate': [0.2, 0.3, 0.4, 0.5],
    'batch_size': [8, 16, 32]  # åŸºæ–¼è¨˜æ†¶é«”é™åˆ¶
}
```

**èª¿å„ªé‚è¼¯**ï¼š
- **å­¸ç¿’ç‡**ï¼šå¤§æ•¸æ“šé›†éœ€è¦è¼ƒå°å­¸ç¿’ç‡é¿å…éœ‡ç›ª
- **éš±è—å±¤å¤§å°**ï¼šå¹³è¡¡è¡¨é”èƒ½åŠ›å’Œéæ“¬åˆé¢¨éšª
- **å±¤æ•¸**ï¼šæ·±åº¦å¢åŠ è¡¨é”èƒ½åŠ›ï¼Œä½†å¢åŠ éæ“¬åˆé¢¨éšª

### ç¬¬å››æ­¥ï¼šé«˜ç´šæ¨¡å‹å¯¦é©—ï¼ˆç¬¬6-7å¤©ï¼‰

#### 4.1 é›™å‘GRU + è‡ªæ³¨æ„åŠ›
```python
# æ–‡ä»¶ï¼šsrc/models/advanced_gru.py
# ç›®çš„ï¼šé”åˆ°90%ä»¥ä¸Šæº–ç¢ºç‡

class AdvancedGRU(nn.Module):
    def __init__(self, input_size=162, hidden_size=256, num_layers=3, num_classes=34):
        super().__init__()
        # é›™å‘GRUï¼šåŒæ™‚çœ‹éå»å’Œæœªä¾†
        self.bigru = nn.GRU(input_size, hidden_size, num_layers,
                           batch_first=True, bidirectional=True, dropout=0.3)
        
        # è‡ªæ³¨æ„åŠ›ï¼šå­¸ç¿’åºåˆ—å…§éƒ¨é—œä¿‚
        self.self_attention = SelfAttention(hidden_size * 2)
        
        # åˆ†é¡é ­
        self.classifier = nn.Sequential(
            nn.Linear(hidden_size * 2, 128),
            nn.ReLU(),
            nn.Dropout(0.4),
            nn.Linear(128, num_classes)
        )
```

**ç‚ºä»€éº¼ç”¨é›™å‘GRU**ï¼š
- **æ‰‹èªç‰¹æ€§**ï¼šç•¶å‰å¹€çš„æ„ç¾©ä¾è³´æ–¼å‰å¾Œæ–‡
- **åºåˆ—å®Œæ•´æ€§**ï¼šé›™å‘è™•ç†æ•ç²å®Œæ•´çš„å‹•ä½œæ¨¡å¼
- **æ€§èƒ½æå‡**ï¼šé æœŸé”åˆ°90%ä»¥ä¸Šæº–ç¢ºç‡

### ç¬¬äº”æ­¥ï¼šæ¨¡å‹è©•ä¼°èˆ‡éƒ¨ç½²ï¼ˆç¬¬8-10å¤©ï¼‰

#### 5.1 ç¶œåˆè©•ä¼°æ¡†æ¶
```python
# æ–‡ä»¶ï¼šsrc/evaluation.py
# å¤šç¶­åº¦æ€§èƒ½è©•ä¼°

class ModelEvaluator:
    def evaluate_model(self, model, test_loader):
        metrics = {
            'accuracy': self.compute_accuracy(),
            'per_class_f1': self.compute_f1_scores(),
            'confusion_matrix': self.compute_confusion_matrix(),
            'inference_time': self.measure_inference_speed(),
            'memory_usage': self.measure_memory_usage()
        }
        return metrics
```

#### 5.2 å¯¦æ™‚ç³»çµ±é›†æˆ
```python
# æ–‡ä»¶ï¼šsrc/real_time_inference.py
# æ”åƒé ­å¯¦æ™‚æ¨ç†

class RealTimeSignDetector:
    def __init__(self, model_path):
        self.model = self.load_optimized_model(model_path)
        self.pose_detector = MediaPipeHands()
        self.sequence_buffer = deque(maxlen=30)
        
    def process_frame(self, frame):
        # 1. æå–æ‰‹éƒ¨åº§æ¨™
        # 2. æ¨™æº–åŒ–è™•ç†
        # 3. åºåˆ—é æ¸¬
        # 4. å¹³æ»‘è¼¸å‡º
```

## ğŸ“Š é æœŸè¨“ç·´æ™‚é–“è¡¨

### åŸºæ–¼æ•¸æ“šåˆ†æçš„æ™‚é–“ä¼°ç®—

#### ç°¡å–®GRUæ¨¡å‹ï¼ˆç¬¬3å¤©ï¼‰
- **æ•¸æ“šæº–å‚™**: 2å°æ™‚
- **æ¨¡å‹è¨“ç·´**: 3.5å°æ™‚ï¼ˆ50 epochs, batch_size=16ï¼‰
- **è©•ä¼°åˆ†æ**: 1å°æ™‚
- **ç¸½è¨ˆ**: 6.5å°æ™‚

#### ä¸­ç´šæ³¨æ„åŠ›æ¨¡å‹ï¼ˆç¬¬4-5å¤©ï¼‰
- **æ¨¡å‹å¯¦ç¾**: 3å°æ™‚
- **è¶…åƒæ•¸èª¿å„ª**: 8å°æ™‚ï¼ˆå¤šçµ„å¯¦é©—ï¼‰
- **æœ€ä½³æ¨¡å‹è¨“ç·´**: 5å°æ™‚
- **ç¸½è¨ˆ**: 16å°æ™‚

#### é«˜ç´šé›™å‘æ¨¡å‹ï¼ˆç¬¬6-7å¤©ï¼‰
- **æ¶æ§‹å¯¦ç¾**: 4å°æ™‚
- **å®Œæ•´è¨“ç·´**: 12å°æ™‚ï¼ˆ150 epochsï¼‰
- **æ¨¡å‹å„ªåŒ–**: 4å°æ™‚
- **ç¸½è¨ˆ**: 20å°æ™‚

## ğŸ¯ é—œéµæˆåŠŸå› ç´ 

### 1. æ•¸æ“šè™•ç†è³ªé‡
- **ç¼ºå¤±å€¼ç­–ç•¥**ï¼šç›´æ¥å½±éŸ¿æ¨¡å‹æ€§èƒ½
- **åºåˆ—åˆ‡å‰²**ï¼šå½±éŸ¿æ™‚åºå­¸ç¿’æ•ˆæœ
- **æ•¸æ“šå¢å¼·**ï¼šå½±éŸ¿æ³›åŒ–èƒ½åŠ›

### 2. æ¨¡å‹é¸æ“‡é‚è¼¯
- **æ¼¸é€²å¼è¤‡é›œåº¦**ï¼šé¿å…éæ—©éæ“¬åˆ
- **é‡å°æ€§è¨­è¨ˆ**ï¼šè€ƒæ…®æ‰‹èªå‹•ä½œç‰¹æ€§
- **å¯¦æ™‚æ€§å¹³è¡¡**ï¼šæº–ç¢ºç‡èˆ‡é€Ÿåº¦å¹³è¡¡

### 3. è¨“ç·´ç­–ç•¥å„ªåŒ–
- **æ‰¹æ¬¡å¤§å°**ï¼šå¹³è¡¡è¨˜æ†¶é«”èˆ‡æ¢¯åº¦ç©©å®šæ€§
- **å­¸ç¿’ç‡èª¿åº¦**ï¼šé©æ‡‰å¤§æ•¸æ“šé›†è¨“ç·´
- **æ—©åœæ©Ÿåˆ¶**ï¼šé˜²æ­¢éæ“¬åˆ

## âš ï¸ æ½›åœ¨å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

### å•é¡Œ1ï¼šè¨˜æ†¶é«”ä¸è¶³
**è§£æ±ºæ–¹æ¡ˆ**ï¼š
- æ•¸æ“šç”Ÿæˆå™¨åˆ†æ‰¹è¼‰å…¥
- æ¢¯åº¦ç´¯ç©æ¨¡æ“¬å¤§æ‰¹æ¬¡
- æ··åˆç²¾åº¦è¨“ç·´ç¯€çœè¨˜æ†¶é«”

### å•é¡Œ2ï¼šè¨“ç·´æ™‚é–“éé•·
**è§£æ±ºæ–¹æ¡ˆ**ï¼š
- å¤šGPUä¸¦è¡Œè¨“ç·´
- æ¨¡å‹ä¸¦è¡Œå¯¦é©—
- æ—©æœŸåœæ­¢ç„¡æ•ˆå¯¦é©—

### å•é¡Œ3ï¼šé¡åˆ¥ä¸å¹³è¡¡
**è§£æ±ºæ–¹æ¡ˆ**ï¼š
- åŠ æ¬Šæå¤±å‡½æ•¸
- éæ¡æ¨£å°‘æ•¸é¡åˆ¥
- æ•¸æ“šå¢å¼·å¹³è¡¡ç­–ç•¥

é€™å€‹è¨“ç·´è¨ˆåŠƒåŸºæ–¼å¯¦éš›æ•¸æ“šåˆ†æï¼Œé‚è¼¯æ¸…æ™°ï¼Œæ­¥é©Ÿæ¼¸é€²ï¼Œæ—¢è€ƒæ…®äº†æŠ€è¡“å¯¦ç¾çš„å¯è¡Œæ€§ï¼Œä¹Ÿå…¼é¡§äº†é …ç›®æ™‚é–“é™åˆ¶å’Œç¡¬ä»¶ç´„æŸã€‚
